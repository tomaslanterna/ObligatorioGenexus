CREATE TABLE [EspectaculoLugarSector] ([EspectaculoId] smallint NOT NULL , [LugarSectorId] smallint NOT NULL , [LugarSectorCantidadAsientos] smallint NOT NULL , [LugarSectorEstadoSector] smallint NOT NULL , PRIMARY KEY([EspectaculoId], [LugarSectorId]))

CREATE TABLE [LugarSector] ([LugarId] smallint NOT NULL , [LugarSectorId] smallint NOT NULL , [LugarSectorName] nvarchar(40) NOT NULL , [LugarSectorCantidad] smallint NOT NULL , [LugarSectorPrecio] smallint NOT NULL , PRIMARY KEY([LugarId], [LugarSectorId]))

CREATE TABLE [Invitacion] ([InvitacionId] smallint NOT NULL IDENTITY(1,1), [InvitacionFecha] datetime NOT NULL , [FuncionId] smallint NOT NULL , [InvitacionName] nvarchar(40) NULL , PRIMARY KEY([InvitacionId]))
CREATE NONCLUSTERED INDEX [IINVITACION1] ON [Invitacion] ([FuncionId] )

CREATE TABLE [Entrada] ([EntradaId] smallint NOT NULL IDENTITY(1,1), [ClienteId] smallint NOT NULL , [FuncionId] smallint NOT NULL , [LugarSectorId] smallint NOT NULL , [EntradaFecha] datetime NOT NULL , [EntradaPaisOrigenId] smallint NOT NULL , [EntradaPaisOrigenName] nvarchar(40) NOT NULL , PRIMARY KEY([EntradaId]))
CREATE NONCLUSTERED INDEX [IENTRADA1] ON [Entrada] ([FuncionId] )
CREATE NONCLUSTERED INDEX [IENTRADA2] ON [Entrada] ([ClienteId] )

CREATE TABLE [Funcion] ([FuncionId] smallint NOT NULL , [EspectaculoId] smallint NOT NULL , [PrecioFuncion] smallint NOT NULL , [FuncionName] nvarchar(40) NOT NULL , PRIMARY KEY([FuncionId]))
CREATE NONCLUSTERED INDEX [IFUNCION1] ON [Funcion] ([EspectaculoId] )

CREATE TABLE [Cliente] ([ClienteId] smallint NOT NULL IDENTITY(1,1), [ClienteName] nvarchar(40) NOT NULL , [PaisId] smallint NOT NULL , PRIMARY KEY([ClienteId]))
CREATE NONCLUSTERED INDEX [ICLIENTE1] ON [Cliente] ([PaisId] )

CREATE TABLE [TipoEspectaculo] ([TipoEspectaculoId] smallint NOT NULL IDENTITY(1,1), [TipoEspectaculoName] nvarchar(40) NOT NULL , PRIMARY KEY([TipoEspectaculoId]))

CREATE TABLE [Pais] ([PaisId] smallint NOT NULL IDENTITY(1,1), [PaisName] nvarchar(40) NOT NULL , [PaisFlag] VARBINARY(MAX) NULL , [PaisFlag_GXI] varchar(2048) NULL , PRIMARY KEY([PaisId]))

CREATE TABLE [Lugar] ([LugarId] smallint NOT NULL IDENTITY(1,1), [LugarName] nvarchar(40) NOT NULL , [PaisId] smallint NOT NULL , PRIMARY KEY([LugarId]))
CREATE NONCLUSTERED INDEX [ILUGAR1] ON [Lugar] ([PaisId] )

CREATE TABLE [Espectaculo] ([EspectaculoId] smallint NOT NULL IDENTITY(1,1), [EspectaculoName] nvarchar(40) NOT NULL , [LugarId] smallint NOT NULL , [TipoEspectaculoId] smallint NOT NULL , [EspectaculoImagen] VARBINARY(MAX) NOT NULL , [EspectaculoImagen_GXI] varchar(2048) NULL , [EspectaculoFecha] datetime NOT NULL , PRIMARY KEY([EspectaculoId]))
CREATE NONCLUSTERED INDEX [IESPECTACULO1] ON [Espectaculo] ([LugarId] )
CREATE NONCLUSTERED INDEX [IESPECTACULO3] ON [Espectaculo] ([TipoEspectaculoId] )

ALTER TABLE [Espectaculo] ADD CONSTRAINT [IESPECTACULO1] FOREIGN KEY ([LugarId]) REFERENCES [Lugar] ([LugarId])
ALTER TABLE [Espectaculo] ADD CONSTRAINT [IESPECTACULO3] FOREIGN KEY ([TipoEspectaculoId]) REFERENCES [TipoEspectaculo] ([TipoEspectaculoId])

ALTER TABLE [Lugar] ADD CONSTRAINT [ILUGAR1] FOREIGN KEY ([PaisId]) REFERENCES [Pais] ([PaisId])

ALTER TABLE [Cliente] ADD CONSTRAINT [ICLIENTE1] FOREIGN KEY ([PaisId]) REFERENCES [Pais] ([PaisId])

ALTER TABLE [Funcion] ADD CONSTRAINT [IFUNCION1] FOREIGN KEY ([EspectaculoId]) REFERENCES [Espectaculo] ([EspectaculoId])

ALTER TABLE [Entrada] ADD CONSTRAINT [IENTRADA2] FOREIGN KEY ([ClienteId]) REFERENCES [Cliente] ([ClienteId])
ALTER TABLE [Entrada] ADD CONSTRAINT [IENTRADA1] FOREIGN KEY ([FuncionId]) REFERENCES [Funcion] ([FuncionId])

ALTER TABLE [Invitacion] ADD CONSTRAINT [IINVITACION1] FOREIGN KEY ([FuncionId]) REFERENCES [Funcion] ([FuncionId])

ALTER TABLE [LugarSector] ADD CONSTRAINT [ILUGARSECTOR1] FOREIGN KEY ([LugarId]) REFERENCES [Lugar] ([LugarId])

ALTER TABLE [EspectaculoLugarSector] ADD CONSTRAINT [IESPECTACULOLUGARSECTOR1] FOREIGN KEY ([EspectaculoId]) REFERENCES [Espectaculo] ([EspectaculoId])

